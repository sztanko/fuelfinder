(this.webpackJsonpfuelfinder=this.webpackJsonpfuelfinder||[]).push([[0],{40:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(11),i=n.n(s),o=(n(40),n(6)),r=n(19),l=n.n(r),u=n(2),j=function(e,t){var n=Object(o.a)(e,2),a=n[0],c=n[1],s=Object(o.a)(t,2),i=s[0],r=s[1],l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=function(e){return Math.PI/180*e},j=function(e,t){return Math.PI/180*(e-t)},d=j(r,c),b=j(i,a);c=u(c),r=u(r);var h=Math.pow(Math.sin(d/2),2)+Math.pow(Math.sin(b/2),2)*Math.cos(c)*Math.cos(r),O=2*Math.asin(Math.sqrt(h)),m=6371*O;return l&&(m/=1.60934),m},d=function(e,t,n){return t.filter((function(t){return j(e,t.coords)<n})).sort((function(t,n){return j(e,t.coords)-j(e,n.coords)}))},b=n(69),h=n(68),O=n(65),m=n(32),x=n(67),f=n(66),p=n(70),g=n(1),v=function(e){var t=e.stationId,n=Object(a.useState)(void 0),c=Object(o.a)(n,2),s=c[0],i=c[1],r=Object(a.useState)(void 0),u=Object(o.a)(r,2),j=u[0],d=u[1],h=Object(a.useState)(-5),x=Object(o.a)(h,2),v=x[0],k=x[1],w=Object(a.useState)(null),y=Object(o.a)(w,2),C=y[0],M=y[1];return C?Object(g.jsx)("div",{className:"submitForm",children:Object(g.jsx)(O.a,{children:Object(g.jsx)(m.a,{children:Object(g.jsx)(b.a,{variant:"success",children:"Thank you for submitting this information. It will appear on the website within the next 5 minutes."})})})}):Object(g.jsx)("div",{className:"submitForm",children:Object(g.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(),console.log(e),function(e,t){l.a.post("https://ekale7ux51.execute-api.eu-west-2.amazonaws.com/Production",e).then(t)}({id:t,petrol:s,diesel:j,queue:v},(function(){M(!0)}))},children:[Object(g.jsxs)(p.a.Group,{as:O.a,className:"mb-3",controlId:"formPetrol",children:[Object(g.jsx)(p.a.Label,{column:!0,sm:"4",children:"Is there Petrol?"}),Object(g.jsxs)(m.a,{sm:"8",children:[Object(g.jsx)(p.a.Check,{inline:!0,label:"Yes",name:"petrol",type:"radio",id:"petrol-check-yes",checked:!0===s,onChange:function(e){return i(!0)}}),Object(g.jsx)(p.a.Check,{inline:!0,label:"No",name:"petrol",type:"radio",id:"petrol-check-no",checked:!1===s,onChange:function(e){return i(!1)}}),Object(g.jsx)(p.a.Check,{inline:!0,label:"Don't know",name:"petrol",type:"radio",id:"petrol-check-dontknow",checked:void 0===s,onChange:function(e){return i(void 0)}})]})]}),Object(g.jsxs)(p.a.Group,{as:O.a,className:"mb-3",controlId:"formDiesel",children:[Object(g.jsx)(p.a.Label,{column:!0,sm:"4",children:"Is there Diesel?"}),Object(g.jsxs)(m.a,{sm:"8",children:[Object(g.jsx)(p.a.Check,{inline:!0,label:"Yes",name:"diesel",type:"radio",id:"diesel-check-yes",checked:!0===j,onChange:function(e){return d(!0)}}),Object(g.jsx)(p.a.Check,{inline:!0,label:"No",name:"diesel",type:"radio",id:"diesel-check-no",checked:!1===j,onChange:function(e){return d(!1)}}),Object(g.jsx)(p.a.Check,{inline:!0,label:"Don't know",name:"diesel",type:"radio",id:"diesel-check-dontknow",checked:void 0===j,onChange:function(e){return d(void 0)}})]})]}),Object(g.jsxs)(p.a.Group,{as:O.a,className:"mb-3",controlId:"formQueue",children:[Object(g.jsx)(p.a.Label,{column:!0,sm:"4",children:"How long is the queue in minutes, your guess?"}),Object(g.jsxs)(m.a,{sm:"8",children:[Object(g.jsx)(p.a.Range,{min:"-5",max:"120",value:v,step:5,onChange:function(e){k(e.target.value)}}),v>=0?"".concat(v," minute(s)"):"No idea"]})]}),Object(g.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})})},k=function(e,t){var n=e.yes+e.no,a=t.yes+t.no,c=1-1/Math.pow(3,n),s=1-1/Math.pow(3,a);return 0===a?0:.3*c*(n>0?(e.yes-e.no)/n:0)+.7*s*(a>0?(t.yes-t.no)/a:0)},w=function(e){var t=e<0?"no":"yes";return Math.abs(e)<.1?["Don't know","secondary"]:Math.abs(e)<.4?["Not sure","warning"]:Math.abs(e)<.7?["Probably ".concat(t),e<0?"danger":"success"]:[t,e<0?"danger":"success"]},y=function(e){var t=e.station,n=t.id,c=t.coords,s=t.name,i=t.last_update,r=t.phone,l=t.address,u=t.stats,d=Object(a.useState)(!1),b=Object(o.a)(d,2),h=b[0],p=b[1],y=j(c,e.userLocation),C=[e.userLocation[1],e.userLocation[0]],M="https://www.google.com/maps/dir/".concat(C,"/").concat(c[1],",").concat(c[0]),S=k(u[300].diesel,u[1800].diesel),L=w(S),N=Object(o.a)(L,2),I=N[0],D=N[1],P=k(u[300].petrol,u[1800].petrol),F=w(P),E=Object(o.a)(F,2),G=E[0],T=E[1],U=Math.round(((new Date).getTime()/1e3-i)/60);return Object(g.jsxs)("div",{className:"station",children:[Object(g.jsxs)(O.a,{children:[Object(g.jsxs)(m.a,{children:[s||l||"unnamed",Object(g.jsx)("br",{}),Object(g.jsx)("small",{children:Object(g.jsxs)("a",{href:M,children:[Math.ceil(100*y)/100," miles away"]})})]}),Object(g.jsx)(m.a,{children:Object(g.jsxs)("div",{className:"stationInfo",children:["Diesel:",Object(g.jsx)(x.a,{bg:D,children:I}),Object(g.jsx)("br",{}),"Petrol:",Object(g.jsx)(x.a,{bg:T,children:G}),Object(g.jsx)("br",{}),Object(g.jsxs)("div",{className:"lastUpdate",children:["last update ",U,"m ago"]})]})})]}),Object(g.jsxs)(O.a,{children:[Object(g.jsx)(m.a,{children:r&&Object(g.jsxs)(f.a,{size:"sm",variant:"info",href:"tel://".concat(r),children:["Call them: ",r]})}),Object(g.jsx)(m.a,{children:Object(g.jsx)(f.a,{size:"sm",variant:"warning",onClick:function(e){return p(!h)},children:h?"Hide":"Send Update"})})]}),h&&Object(g.jsx)(v,{stationId:n})]})},C=function(e){var t=e.userLocation,n=e.stations,a=e.lastUpdate,c=Math.ceil(((new Date).getTime()/1e3-a)/60),s=n.map((function(e){return Object(g.jsx)(y,{station:e,userLocation:t},e.id)}));return Object(g.jsxs)("div",{className:"stationList",children:[Object(g.jsxs)("div",{children:["Last update: ",c," minutes ago"]}),s]})};var M=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),r=i[0],j=i[1],x=Object(a.useState)(null),f=Object(o.a)(x,2),p=f[0],v=f[1],k=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),r=i[0],l=i[1],j=function(e){var t=e.coords;c({latitude:t.latitude,longitude:t.longitude})},d=function(e){l(e.message)};return Object(a.useEffect)((function(){var e=navigator.geolocation;if(e){var t=e.watchPosition(j,d);return function(){return e.clearWatch(t)}}l("Geolocation is not supported")}),[]),Object(u.a)(Object(u.a)({},n),{},{error:r})}(),w=k.latitude,y=k.longitude,M=k.error;Object(a.useEffect)((function(){var e,t;e=function(e){return c(e.data)},t=v,l.a.get("stations.json").then(e).catch(t)}),[]),Object(a.useEffect)((function(){j(n&&w&&y?{lastUpdate:n.last_update,stationData:d([y,w],n.station_data,8)}:null)}),[n,w,y]);var S=null;return n||(S=p?Object(g.jsx)(b.a,{children:"Coulnd't load stations. Error happened."}):Object(g.jsx)(b.a,{children:"Loading stations..."})),w||(M&&(S=Object(g.jsx)(b.a,{children:"Coulnd't get your location."})),S=Object(g.jsx)(b.a,{children:"Getting your location"})),!S&&r&&(S=Object(g.jsx)(C,{userLocation:[y,w],stations:r.stationData,lastUpdate:n.last_update})),Object(g.jsxs)(h.a,{children:[Object(g.jsx)(O.a,{children:Object(g.jsx)(m.a,{children:Object(g.jsx)("h1",{children:"FuelFinder.uk"})})}),Object(g.jsx)(O.a,{children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)("h2",{children:"Nearest Stations"}),S]})})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(M,{})}),document.getElementById("root")),S()}},[[63,1,2]]]);
//# sourceMappingURL=main.6a7c6d56.chunk.js.map