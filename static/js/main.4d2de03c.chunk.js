(this.webpackJsonpfuelfinder=this.webpackJsonpfuelfinder||[]).push([[0],{40:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(11),i=n.n(s),o=(n(40),n(6)),r=n(19),l=n.n(r),j=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SAVE_API_URL,d=n(2),u=function(e,t){var n=Object(o.a)(e,2),a=n[0],c=n[1],s=Object(o.a)(t,2),i=s[0],r=s[1],l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],j=function(e){return Math.PI/180*e},d=function(e,t){return Math.PI/180*(e-t)},u=d(r,c),b=d(i,a);c=j(c),r=j(r);var h=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(b/2),2)*Math.cos(c)*Math.cos(r),O=2*Math.asin(Math.sqrt(h)),m=6371*O;return l&&(m/=1.60934),m},b=function(e,t,n){return t.filter((function(t){return u(e,t.coords)<n})).sort((function(t,n){return u(e,t.coords)-u(e,n.coords)}))},h=n(69),O=n(68),m=n(65),x=n(32),f=n(67),p=n(66),g=n(70),v=n(1),k=function(e){var t=e.stationId,n=Object(a.useState)(void 0),c=Object(o.a)(n,2),s=c[0],i=c[1],r=Object(a.useState)(void 0),d=Object(o.a)(r,2),u=d[0],b=d[1],O=Object(a.useState)(-5),f=Object(o.a)(O,2),k=f[0],S=f[1],C=Object(a.useState)(null),w=Object(o.a)(C,2),y=w[0],M=w[1];return y?Object(v.jsx)("div",{className:"submitForm",children:Object(v.jsx)(m.a,{children:Object(v.jsx)(x.a,{children:Object(v.jsx)(h.a,{variant:"success",children:"Thank you for submitting this information. It will appear on the website within the next 5 minutes."})})})}):Object(v.jsx)("div",{className:"submitForm",children:Object(v.jsxs)(g.a,{onSubmit:function(e){e.preventDefault(),console.log(e),function(e,t){l.a.post(j,e).then(t)}({id:t,petrol:s,diesel:u,queue:k},(function(){M(!0)}))},children:[Object(v.jsxs)(g.a.Group,{as:m.a,className:"mb-3",controlId:"formPetrol",children:[Object(v.jsx)(g.a.Label,{column:!0,sm:"4",children:"Is there Petrol?"}),Object(v.jsxs)(x.a,{sm:"8",children:[Object(v.jsx)(g.a.Check,{inline:!0,label:"Yes",name:"petrol",type:"radio",id:"petrol-check-yes",checked:!0===s,onChange:function(e){return i(!0)}}),Object(v.jsx)(g.a.Check,{inline:!0,label:"No",name:"petrol",type:"radio",id:"petrol-check-no",checked:!1===s,onChange:function(e){return i(!1)}}),Object(v.jsx)(g.a.Check,{inline:!0,label:"Don't know",name:"petrol",type:"radio",id:"petrol-check-dontknow",checked:void 0===s,onChange:function(e){return i(void 0)}})]})]}),Object(v.jsxs)(g.a.Group,{as:m.a,className:"mb-3",controlId:"formDiesel",children:[Object(v.jsx)(g.a.Label,{column:!0,sm:"4",children:"Is there Diesel?"}),Object(v.jsxs)(x.a,{sm:"8",children:[Object(v.jsx)(g.a.Check,{inline:!0,label:"Yes",name:"diesel",type:"radio",id:"diesel-check-yes",checked:!0===u,onChange:function(e){return b(!0)}}),Object(v.jsx)(g.a.Check,{inline:!0,label:"No",name:"diesel",type:"radio",id:"diesel-check-no",checked:!1===u,onChange:function(e){return b(!1)}}),Object(v.jsx)(g.a.Check,{inline:!0,label:"Don't know",name:"diesel",type:"radio",id:"diesel-check-dontknow",checked:void 0===u,onChange:function(e){return b(void 0)}})]})]}),Object(v.jsxs)(g.a.Group,{as:m.a,className:"mb-3",controlId:"formQueue",children:[Object(v.jsx)(g.a.Label,{column:!0,sm:"4",children:"How long is the queue in minutes, your guess?"}),Object(v.jsxs)(x.a,{sm:"8",children:[Object(v.jsx)(g.a.Range,{min:"-5",max:"120",value:k,step:5,onChange:function(e){S(e.target.value)}}),k>=0?"".concat(k," minute(s)"):"No idea"]})]}),Object(v.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})})},S=function(e,t){var n=e.yes+e.no,a=t.yes+t.no,c=1-1/Math.pow(3,n),s=1-1/Math.pow(3,a);return 0===a?0:.3*c*(n>0?(e.yes-e.no)/n:0)+.7*s*(a>0?(t.yes-t.no)/a:0)},C=function(e){var t=e<0?"no":"yes";return Math.abs(e)<.1?["Don't know","secondary"]:Math.abs(e)<.4?["Not sure","warning"]:Math.abs(e)<.7?["Probably ".concat(t),e<0?"danger":"success"]:[t,e<0?"danger":"success"]},w=function(e){var t=e.station,n=t.id,c=t.coords,s=t.name,i=t.last_update,r=t.phone,l=t.address,j=t.stats,d=Object(a.useState)(!1),b=Object(o.a)(d,2),h=b[0],O=b[1],g=u(c,e.userLocation),w=[e.userLocation[1],e.userLocation[0]],y="https://www.google.com/maps/dir/".concat(w,"/").concat(c[1],",").concat(c[0]),M=S(j[300].diesel,j[1800].diesel),L=C(M),_=Object(o.a)(L,2),D=_[0],N=_[1],I=S(j[300].petrol,j[1800].petrol),P=C(I),E=Object(o.a)(P,2),T=E[0],F=E[1],U=Math.round(((new Date).getTime()/1e3-i)/60);return Object(v.jsxs)("div",{className:"station",children:[Object(v.jsxs)(m.a,{children:[Object(v.jsxs)(x.a,{children:[s||l||"unnamed",Object(v.jsx)("br",{}),Object(v.jsx)("small",{children:Object(v.jsxs)("a",{href:y,children:[Math.ceil(100*g)/100," miles away"]})})]}),Object(v.jsx)(x.a,{children:Object(v.jsxs)("div",{className:"stationInfo",children:["Diesel:",Object(v.jsx)(f.a,{bg:N,children:D}),Object(v.jsx)("br",{}),"Petrol:",Object(v.jsx)(f.a,{bg:F,children:T}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"lastUpdate",children:["last update ",U,"m ago"]})]})})]}),Object(v.jsxs)(m.a,{children:[Object(v.jsx)(x.a,{children:r&&Object(v.jsxs)(p.a,{size:"sm",variant:"info",href:"tel://".concat(r),children:["Call them: ",r]})}),Object(v.jsx)(x.a,{children:Object(v.jsx)(p.a,{size:"sm",variant:"warning",onClick:function(e){return O(!h)},children:h?"Hide":"Send Update"})})]}),h&&Object(v.jsx)(k,{stationId:n})]})},y=function(e){var t=e.userLocation,n=e.stations,a=e.lastUpdate,c=Math.ceil(((new Date).getTime()/1e3-a)/60),s=n.map((function(e){return Object(v.jsx)(w,{station:e,userLocation:t},e.id)}));return Object(v.jsxs)("div",{className:"stationList",children:[Object(v.jsxs)("div",{children:["Last update: ",c," minutes ago"]}),s]})};var M=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),r=i[0],j=i[1],u=Object(a.useState)(null),f=Object(o.a)(u,2),p=f[0],g=f[1],k=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),r=i[0],l=i[1],j=function(e){var t=e.coords;c({latitude:t.latitude,longitude:t.longitude})},u=function(e){l(e.message)};return Object(a.useEffect)((function(){var e=navigator.geolocation;if(e){var t=e.watchPosition(j,u);return function(){return e.clearWatch(t)}}l("Geolocation is not supported")}),[]),Object(d.a)(Object(d.a)({},n),{},{error:r})}(),S=k.latitude,C=k.longitude,w=k.error;Object(a.useEffect)((function(){var e,t;e=function(e){return c(e.data)},t=g,l.a.get("stations.json").then(e).catch(t)}),[]),Object(a.useEffect)((function(){j(n&&S&&C?{lastUpdate:n.last_update,stationData:b([C,S],n.station_data,8)}:null)}),[n,S,C]);var M=null;return n||(M=p?Object(v.jsx)(h.a,{children:"Coulnd't load stations. Error happened."}):Object(v.jsx)(h.a,{children:"Loading stations..."})),S||(w&&(M=Object(v.jsx)(h.a,{children:"Coulnd't get your location."})),M=Object(v.jsx)(h.a,{children:"Getting your location"})),!M&&r&&(M=Object(v.jsx)(y,{userLocation:[C,S],stations:r.stationData,lastUpdate:n.last_update})),Object(v.jsxs)(O.a,{children:[Object(v.jsx)(m.a,{children:Object(v.jsx)(x.a,{children:Object(v.jsx)("h1",{children:"FuelFinder.uk"})})}),Object(v.jsx)(m.a,{children:Object(v.jsxs)(x.a,{children:[Object(v.jsx)("h2",{children:"Nearest Stations"}),M]})})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(M,{})}),document.getElementById("root")),L()}},[[63,1,2]]]);
//# sourceMappingURL=main.4d2de03c.chunk.js.map